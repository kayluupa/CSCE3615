<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apartment Details - AptMate</title>
    <link rel="stylesheet" href="navbar/navbar.css">
    <link rel="stylesheet" href="apartment-details.css">
</head>
<body>
    <div id="navbar-container"></div>

    <div class="apartment-details-container">
        <h1 id="apartmentTitle">Apartment Details</h1>
        <div id="apartmentDetails" class="apartment-details">
            <!-- Apartment details will be dynamically inserted here -->
        </div>
        <div id="apartmentPhotos" class="apartment-photos">
            <!-- Apartment photos will be dynamically inserted here -->
        </div>
    </div>

    <script type="module">
        import { fetchApartmentData } from './database.js';
    
        async function displayApartmentDetails() {
            const urlParams = new URLSearchParams(window.location.search);
            const apartmentId = urlParams.get('id');
            console.log(`Apartment ID from URL: ${apartmentId}`); // Added debug log
            const apartmentDetails = await fetchApartmentData(apartmentId);
    
            if (apartmentDetails) {
                document.getElementById('apartmentTitle').innerText = `Apartment ID: ${apartmentId}`;
                const detailsContainer = document.getElementById('apartmentDetails');
                const amenities = Array.isArray(apartmentDetails.Amenities)
                    ? apartmentDetails.Amenities.join(', ')
                    : apartmentDetails.Amenities;
                detailsContainer.innerHTML = `
                    <div class="detail-item"><span class="detail-label">Price:</span> $${apartmentDetails.Price}</div>
                    <div class="detail-item"><span class="detail-label">Bedrooms:</span> ${apartmentDetails.Bedroom}</div>
                    <div class="detail-item"><span class="detail-label">Bathrooms:</span> ${apartmentDetails.Bathroom}</div>
                    <div class="detail-item"><span class="detail-label">Zip Code:</span> ${apartmentDetails.ZipCode}</div>
                    <div class="detail-item"><span class="detail-label">Amenities:</span> ${amenities}</div>
                `;
    
                const photosContainer = document.getElementById('apartmentPhotos');
                if (apartmentDetails.Photos) {
                    apartmentDetails.Photos.forEach(photoUrl => {
                        const img = document.createElement('img');
                        img.src = photoUrl;
                        img.alt = "Apartment Photo";
                        img.className = "apartment-photo";
                        photosContainer.appendChild(img);
                    });
                }
            } else {
                console.log('No apartment details found.');
            }
        }
    
        window.onload = displayApartmentDetails;
    </script>
    <script type="module" src="navbar/navbar.js"></script>
</body>
</html>
